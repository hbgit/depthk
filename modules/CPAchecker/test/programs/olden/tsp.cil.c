/* Generated by CIL v. 1.3.7 */
/* print_CIL_Input is true */

#line 1 "tsp.h"
struct tree {
   int sz ;
   double x ;
   double y ;
   struct tree *left ;
   struct tree *right ;
   struct tree *next ;
   struct tree *prev ;
};
#line 214 "/usr/lib/gcc/i486-linux-gnu/4.3.3/include/stddef.h"
typedef unsigned int size_t;
#line 1 "tsp.h"
struct tree___0 {
   int sz ;
   double x ;
   double y ;
   struct tree *left ;
   struct tree *right ;
   struct tree *next ;
   struct tree *prev ;
};
#line 1 "tsp.h"
typedef struct tree___0 *Tree___0;
#line 11
struct tree *build_tree(int n , int dir , int lo , int num_proc , double min_x , double max_x ,
                        double min_y , double max_y ) ;
#line 14
extern struct tree *tsp(struct tree *t , int sz , int nproc ) ;
#line 380 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) int rand(void) ;
#line 395
 __attribute__((__nothrow__)) double drand48(void) ;
#line 471
extern  __attribute__((__nothrow__)) void *malloc(size_t __size )  __attribute__((__malloc__)) ;
#line 531
extern  __attribute__((__nothrow__, __noreturn__)) void exit(int __status ) ;
#line 18 "build.c"
extern double log(double x ) ;
#line 37
static double median(double min , double max , int n ) ;
#line 38
static double uniform(double min , double max ) ;
#line 40
 __attribute__((__nothrow__)) double drand48(void) ;
#line 40 "build.c"
double drand48(void) 
{ int tmp ;
  double __cil_tmp2 ;
  double __cil_tmp3 ;

  {
  {
#line 41
  tmp = rand();
  }
  {
#line 41
  __cil_tmp2 = (double )2147483647;
#line 41
  __cil_tmp3 = (double )tmp;
#line 41
  return (__cil_tmp3 / __cil_tmp2);
  }
}
}
#line 45 "build.c"
static double median(double min , double max , int n ) 
{ double t ;
  double retval ;
  double tmp ;
  double tmp___0 ;
  double __cil_tmp8 ;
  double __cil_tmp9 ;
  double __cil_tmp10 ;
  double __cil_tmp11 ;
  double __cil_tmp12 ;
  double __cil_tmp13 ;
  double __cil_tmp14 ;
  double __cil_tmp15 ;
  double __cil_tmp16 ;
  double __cil_tmp17 ;
  double __cil_tmp18 ;
  double __cil_tmp19 ;
  double __cil_tmp20 ;
  double __cil_tmp21 ;
  double __cil_tmp22 ;
  double __cil_tmp23 ;
  double __cil_tmp24 ;

  {
  {
#line 49
  t = drand48();
  }
#line 50
  if (t > 0.5) {
    {
#line 51
    __cil_tmp8 = t - 0.5;
#line 51
    __cil_tmp9 = (double )1;
#line 51
    __cil_tmp10 = 162754.79141900392083592475 - __cil_tmp9;
#line 51
    __cil_tmp11 = 2.0 * __cil_tmp10;
#line 51
    __cil_tmp12 = __cil_tmp11 * __cil_tmp8;
#line 51
    __cil_tmp13 = __cil_tmp12 / 162754.79141900392083592475;
#line 51
    __cil_tmp14 = 1.0 - __cil_tmp13;
#line 51
    tmp = log(__cil_tmp14);
#line 51
    retval = tmp / 12.0;
    }
  } else {
    {
#line 54
    __cil_tmp15 = (double )1;
#line 54
    __cil_tmp16 = 162754.79141900392083592475 - __cil_tmp15;
#line 54
    __cil_tmp17 = 2.0 * __cil_tmp16;
#line 54
    __cil_tmp18 = __cil_tmp17 * t;
#line 54
    __cil_tmp19 = __cil_tmp18 / 162754.79141900392083592475;
#line 54
    __cil_tmp20 = 1.0 - __cil_tmp19;
#line 54
    tmp___0 = log(__cil_tmp20);
#line 54
    __cil_tmp21 = - tmp___0;
#line 54
    retval = __cil_tmp21 / 12.0;
    }
  }
#line 57
  __cil_tmp22 = max - min;
#line 57
  __cil_tmp23 = retval + 1.0;
#line 57
  __cil_tmp24 = __cil_tmp23 * __cil_tmp22;
#line 57
  retval = __cil_tmp24 / 2.0;
#line 58
  retval = retval + min;
#line 59
  return (retval);
}
}
#line 63 "build.c"
static double uniform(double min , double max ) 
{ double retval ;
  double __cil_tmp4 ;

  {
  {
#line 66
  retval = drand48();
#line 67
  __cil_tmp4 = max - min;
#line 67
  retval = retval * __cil_tmp4;
  }
#line 68
  return (retval + min);
}
}
#line 76 "build.c"
struct tree *build_tree(int n , int dir , int lo , int num_proc , double min_x , double max_x ,
                        double min_y , double max_y ) 
{ double med ;
  Tree___0 t ;
  void *tmp ;
  void *__cil_tmp12 ;
  unsigned int __cil_tmp13 ;
  unsigned int __cil_tmp14 ;
  int __cil_tmp15 ;
  int __cil_tmp16 ;
  int __cil_tmp17 ;
  int __cil_tmp18 ;
  unsigned int __cil_tmp19 ;
  unsigned int __cil_tmp20 ;
  int __cil_tmp21 ;
  int __cil_tmp22 ;
  unsigned int __cil_tmp23 ;
  unsigned int __cil_tmp24 ;
  unsigned int __cil_tmp25 ;
  unsigned int __cil_tmp26 ;
  unsigned int __cil_tmp27 ;
  unsigned int __cil_tmp28 ;
  int __cil_tmp29 ;
  int __cil_tmp30 ;
  int __cil_tmp31 ;
  int __cil_tmp32 ;
  unsigned int __cil_tmp33 ;
  unsigned int __cil_tmp34 ;
  int __cil_tmp35 ;
  int __cil_tmp36 ;
  unsigned int __cil_tmp37 ;
  unsigned int __cil_tmp38 ;
  unsigned int __cil_tmp39 ;
  unsigned int __cil_tmp40 ;
  unsigned int __cil_tmp41 ;
  unsigned int __cil_tmp42 ;
  void *__cil_tmp43 ;
  unsigned int __cil_tmp44 ;
  unsigned int __cil_tmp45 ;
  void *__cil_tmp46 ;
  struct tree **mem_47 ;
  struct tree **mem_48 ;
  double *mem_49 ;
  double *mem_50 ;
  struct tree **mem_51 ;
  struct tree **mem_52 ;
  double *mem_53 ;
  double *mem_54 ;
  int *mem_55 ;
  struct tree **mem_56 ;
  struct tree **mem_57 ;

  {
#line 84
  if (n == 0) {
    {
#line 84
    __cil_tmp12 = (void *)0;
#line 84
    return ((struct tree *)__cil_tmp12);
    }
  } else {

  }
  {
#line 86
  tmp = malloc(36U);
#line 86
  t = (struct tree___0 *)tmp;
  }
#line 87
  if (dir) {
    {
#line 88
    dir = ! dir;
#line 89
    med = median(min_x, max_x, n);
#line 91
    __cil_tmp13 = (unsigned int )t;
#line 91
    __cil_tmp14 = __cil_tmp13 + 20;
#line 91
    __cil_tmp15 = n / 2;
#line 91
    __cil_tmp16 = num_proc / 2;
#line 91
    __cil_tmp17 = lo + __cil_tmp16;
#line 91
    __cil_tmp18 = num_proc / 2;
#line 91
    mem_47 = (struct tree **)__cil_tmp14;
#line 91
    *mem_47 = build_tree(__cil_tmp15, dir, __cil_tmp17, __cil_tmp18, min_x, med, min_y,
                         max_y);
#line 92
    __cil_tmp19 = (unsigned int )t;
#line 92
    __cil_tmp20 = __cil_tmp19 + 24;
#line 92
    __cil_tmp21 = n / 2;
#line 92
    __cil_tmp22 = num_proc / 2;
#line 92
    mem_48 = (struct tree **)__cil_tmp20;
#line 92
    *mem_48 = build_tree(__cil_tmp21, dir, lo, __cil_tmp22, med, max_x, min_y, max_y);
#line 98
    __cil_tmp23 = (unsigned int )t;
#line 98
    __cil_tmp24 = __cil_tmp23 + 4;
#line 98
    mem_49 = (double *)__cil_tmp24;
#line 98
    *mem_49 = med;
#line 99
    __cil_tmp25 = (unsigned int )t;
#line 99
    __cil_tmp26 = __cil_tmp25 + 12;
#line 99
    mem_50 = (double *)__cil_tmp26;
#line 99
    *mem_50 = uniform(min_y, max_y);
    }
  } else {
    {
#line 102
    dir = ! dir;
#line 103
    med = median(min_y, max_y, n);
#line 105
    __cil_tmp27 = (unsigned int )t;
#line 105
    __cil_tmp28 = __cil_tmp27 + 20;
#line 105
    __cil_tmp29 = n / 2;
#line 105
    __cil_tmp30 = num_proc / 2;
#line 105
    __cil_tmp31 = lo + __cil_tmp30;
#line 105
    __cil_tmp32 = num_proc / 2;
#line 105
    mem_51 = (struct tree **)__cil_tmp28;
#line 105
    *mem_51 = build_tree(__cil_tmp29, dir, __cil_tmp31, __cil_tmp32, min_x, max_x,
                         min_y, med);
#line 106
    __cil_tmp33 = (unsigned int )t;
#line 106
    __cil_tmp34 = __cil_tmp33 + 24;
#line 106
    __cil_tmp35 = n / 2;
#line 106
    __cil_tmp36 = num_proc / 2;
#line 106
    mem_52 = (struct tree **)__cil_tmp34;
#line 106
    *mem_52 = build_tree(__cil_tmp35, dir, lo, __cil_tmp36, min_x, max_x, med, max_y);
#line 112
    __cil_tmp37 = (unsigned int )t;
#line 112
    __cil_tmp38 = __cil_tmp37 + 12;
#line 112
    mem_53 = (double *)__cil_tmp38;
#line 112
    *mem_53 = med;
#line 113
    __cil_tmp39 = (unsigned int )t;
#line 113
    __cil_tmp40 = __cil_tmp39 + 4;
#line 113
    mem_54 = (double *)__cil_tmp40;
#line 113
    *mem_54 = uniform(min_x, max_x);
    }
  }
#line 115
  mem_55 = (int *)t;
#line 115
  *mem_55 = n;
#line 116
  __cil_tmp41 = (unsigned int )t;
#line 116
  __cil_tmp42 = __cil_tmp41 + 28;
#line 116
  __cil_tmp43 = (void *)0;
#line 116
  mem_56 = (struct tree **)__cil_tmp42;
#line 116
  *mem_56 = (struct tree *)__cil_tmp43;
#line 117
  __cil_tmp44 = (unsigned int )t;
#line 117
  __cil_tmp45 = __cil_tmp44 + 32;
#line 117
  __cil_tmp46 = (void *)0;
#line 117
  mem_57 = (struct tree **)__cil_tmp45;
#line 117
  *mem_57 = (struct tree *)__cil_tmp46;
#line 122
  return ((struct tree *)t);
}
}
#line 14 "main.c"
int flag  ;
#line 15 "main.c"
int __NumNodes  ;
#line 15 "main.c"
int __NDim  ;
#line 17 "main.c"
int mylog(int num ) 
{ int j ;
  int k ;

  {
#line 19
  j = 0;
#line 19
  k = 1;
  {
#line 21
  while (1) {
    while_0_continue: /* CIL Label */ ;
#line 21
    if (k < num) {

    } else {
      goto while_0_break;
    }
#line 21
    k = k * 2;
#line 21
    j = j + 1;
  }
  while_0_break: /* CIL Label */ ;
  }
#line 22
  return (j);
}
}
#line 25 "main.c"
int dealwithargs(void) 
{ int num ;

  {
  {
#line 29
  flag = 0;
#line 30
  __NumNodes = 4;
#line 32
  __NDim = mylog(__NumNodes);
#line 34
  num = 150000;
  }
#line 36
  return (num);
}
}
#line 46
extern int ( /* missing proto */  chatting)() ;
#line 39 "main.c"
void print_tree(Tree___0 t ) 
{ Tree___0 left ;
  Tree___0 right ;
  double x ;
  double y ;
  unsigned int __cil_tmp6 ;
  unsigned int __cil_tmp7 ;
  unsigned int __cil_tmp8 ;
  unsigned int __cil_tmp9 ;
  unsigned int __cil_tmp10 ;
  unsigned int __cil_tmp11 ;
  struct tree *__cil_tmp12 ;
  unsigned int __cil_tmp13 ;
  unsigned int __cil_tmp14 ;
  struct tree *__cil_tmp15 ;
  double *mem_16 ;
  double *mem_17 ;
  struct tree **mem_18 ;
  struct tree **mem_19 ;

  {
#line 44
  if (! t) {
#line 44
    return;
  } else {

  }
  {
#line 45
  __cil_tmp6 = (unsigned int )t;
#line 45
  __cil_tmp7 = __cil_tmp6 + 4;
#line 45
  mem_16 = (double *)__cil_tmp7;
#line 45
  x = *mem_16;
#line 45
  __cil_tmp8 = (unsigned int )t;
#line 45
  __cil_tmp9 = __cil_tmp8 + 12;
#line 45
  mem_17 = (double *)__cil_tmp9;
#line 45
  y = *mem_17;
#line 46
  chatting("x=%f,y=%f\n", x, y);
#line 47
  __cil_tmp10 = (unsigned int )t;
#line 47
  __cil_tmp11 = __cil_tmp10 + 20;
#line 47
  mem_18 = (struct tree **)__cil_tmp11;
#line 47
  __cil_tmp12 = *mem_18;
#line 47
  left = (struct tree___0 *)__cil_tmp12;
#line 47
  __cil_tmp13 = (unsigned int )t;
#line 47
  __cil_tmp14 = __cil_tmp13 + 24;
#line 47
  mem_19 = (struct tree **)__cil_tmp14;
#line 47
  __cil_tmp15 = *mem_19;
#line 47
  right = (struct tree___0 *)__cil_tmp15;
#line 48
  print_tree(left);
#line 49
  print_tree(right);
  }
#line 50
  return;
}
}
#line 52 "main.c"
void print_list(Tree___0 t ) 
{ Tree___0 tmp ;
  double x ;
  double y ;
  unsigned int __cil_tmp5 ;
  unsigned int __cil_tmp6 ;
  unsigned int __cil_tmp7 ;
  unsigned int __cil_tmp8 ;
  unsigned int __cil_tmp9 ;
  unsigned int __cil_tmp10 ;
  struct tree *__cil_tmp11 ;
  unsigned int __cil_tmp12 ;
  unsigned int __cil_tmp13 ;
  unsigned int __cil_tmp14 ;
  unsigned int __cil_tmp15 ;
  unsigned int __cil_tmp16 ;
  unsigned int __cil_tmp17 ;
  unsigned int __cil_tmp18 ;
  unsigned int __cil_tmp19 ;
  struct tree *__cil_tmp20 ;
  double *mem_21 ;
  double *mem_22 ;
  struct tree **mem_23 ;
  double *mem_24 ;
  double *mem_25 ;
  struct tree **mem_26 ;

  {
#line 57
  if (! t) {
#line 57
    return;
  } else {

  }
  {
#line 58
  __cil_tmp5 = (unsigned int )t;
#line 58
  __cil_tmp6 = __cil_tmp5 + 4;
#line 58
  mem_21 = (double *)__cil_tmp6;
#line 58
  x = *mem_21;
#line 58
  __cil_tmp7 = (unsigned int )t;
#line 58
  __cil_tmp8 = __cil_tmp7 + 12;
#line 58
  mem_22 = (double *)__cil_tmp8;
#line 58
  y = *mem_22;
#line 59
  chatting("%f %f\n", x, y);
#line 60
  __cil_tmp9 = (unsigned int )t;
#line 60
  __cil_tmp10 = __cil_tmp9 + 28;
#line 60
  mem_23 = (struct tree **)__cil_tmp10;
#line 60
  __cil_tmp11 = *mem_23;
#line 60
  tmp = (struct tree___0 *)__cil_tmp11;
  }
  {
#line 60
  while (1) {
    while_1_continue: /* CIL Label */ ;
    {
#line 60
    __cil_tmp12 = (unsigned int )t;
#line 60
    __cil_tmp13 = (unsigned int )tmp;
#line 60
    if (__cil_tmp13 != __cil_tmp12) {

    } else {
      goto while_1_break;
    }
    }
    {
#line 62
    __cil_tmp14 = (unsigned int )tmp;
#line 62
    __cil_tmp15 = __cil_tmp14 + 4;
#line 62
    mem_24 = (double *)__cil_tmp15;
#line 62
    x = *mem_24;
#line 62
    __cil_tmp16 = (unsigned int )tmp;
#line 62
    __cil_tmp17 = __cil_tmp16 + 12;
#line 62
    mem_25 = (double *)__cil_tmp17;
#line 62
    y = *mem_25;
#line 63
    chatting("%f %f\n", x, y);
#line 60
    __cil_tmp18 = (unsigned int )tmp;
#line 60
    __cil_tmp19 = __cil_tmp18 + 28;
#line 60
    mem_26 = (struct tree **)__cil_tmp19;
#line 60
    __cil_tmp20 = *mem_26;
#line 60
    tmp = (struct tree___0 *)__cil_tmp20;
    }
  }
  while_1_break: /* CIL Label */ ;
  }
#line 65
  return;
}
}
#line 67 "main.c"
double wallclock  ;
#line 86
extern int ( /* missing proto */  timer_start)() ;
#line 88
extern int ( /* missing proto */  timer_stop)() ;
#line 91
extern int ( /* missing proto */  timer_elapsed)() ;
#line 69 "main.c"
int main(void) 
{ Tree___0 t ;
  int num ;
  struct tree *tmp ;
  int tmp___0 ;
  struct tree *__cil_tmp5 ;

  {
  {
#line 74
  num = dealwithargs();
#line 76
  chatting("Building tree of size %d\n", num);
#line 77
  tmp = build_tree(num, 0, 0, __NumNodes, 0.0, 1.0, 0.0, 1.0);
#line 77
  t = (struct tree___0 *)tmp;
  }
#line 81
  if (! flag) {
    {
#line 81
    chatting("Past build\n");
    }
  } else {

  }
#line 82
  if (flag) {
    {
#line 82
    chatting("newgraph\n");
    }
  } else {

  }
#line 83
  if (flag) {
    {
#line 83
    chatting("newcurve pts\n");
    }
  } else {

  }
  {
#line 86
  timer_start(0);
#line 87
  __cil_tmp5 = (struct tree *)t;
#line 87
  tsp(__cil_tmp5, 150, __NumNodes);
#line 88
  timer_stop(0);
  }
#line 89
  if (flag) {
    {
#line 89
    print_list(t);
    }
  } else {

  }
#line 90
  if (flag) {
    {
#line 90
    chatting("linetype solid\n");
    }
  } else {

  }
  {
#line 91
  tmp___0 = timer_elapsed(0);
#line 91
  chatting("Time for TSP = %f\n", tmp___0);
#line 99
  exit(0);
  }
}
}
