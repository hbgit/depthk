/* Generated by CIL v. 1.3.7 */
/* print_CIL_Input is true */

#line 49 "atomic_add_return_test.c"
typedef unsigned long long atomic_ea_t;
#line 60 "atomic_add_return_test.c"
union __anonunion_data_addr_6 {
   unsigned long long ull ;
   unsigned int ui[2] ;
};
#line 203 "../spu_mfcio.h"
extern void mfc_put(void volatile   *ls , unsigned int ea , unsigned int size , unsigned int tag ,
                    unsigned int tid , unsigned int rid ) ;
#line 211
extern void mfc_get(void volatile   *ls , unsigned int ea , unsigned int size , unsigned int tag ,
                    unsigned int tid , unsigned int rid ) ;
#line 252
extern void mfc_write_tag_mask(unsigned int mask ) ;
#line 270
extern void mfc_read_tag_status_all() ;
#line 361
extern unsigned int __mfc_tag_reserve(void) ;
#line 52 "atomic_add_return_test.c"
unsigned int data[128]  __attribute__((__aligned__(128)))  ;
#line 73
extern int ( /* missing proto */  __builtin_si_to_uint)() ;
#line 73
extern int ( /* missing proto */  __builtin_si_rdch)() ;
#line 81
extern int ( /* missing proto */  atomic_add_return)() ;
#line 54 "atomic_add_return_test.c"
int spu_main(unsigned long long spuid  __attribute__((__unused__)) , unsigned long long argp ) 
{ int atomic_ret ;
  unsigned int tag ;
  union __anonunion_data_addr_6 data_addr ;
  atomic_ea_t ea ;
  unsigned int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int exit_val ;
  int tmp___4 ;
  unsigned long __cil_tmp15 ;
  unsigned long __cil_tmp16 ;
  unsigned long __cil_tmp17 ;
  unsigned long __cil_tmp18 ;
  unsigned long __cil_tmp19 ;
  unsigned long __cil_tmp20 ;
  void volatile   *__cil_tmp21 ;
  int __cil_tmp22 ;
  unsigned long __cil_tmp23 ;
  unsigned long __cil_tmp24 ;
  unsigned long long __cil_tmp25 ;
  union __anonunion_data_addr_6 *__cil_tmp26 ;
  unsigned long long __cil_tmp27 ;
  unsigned long long __cil_tmp28 ;
  unsigned int __cil_tmp29 ;
  unsigned long __cil_tmp30 ;
  unsigned int __cil_tmp31 ;
  int __cil_tmp32 ;
  unsigned int __cil_tmp33 ;
  void volatile   *__cil_tmp34 ;
  int __cil_tmp35 ;
  unsigned long __cil_tmp36 ;
  unsigned long __cil_tmp37 ;
  unsigned long long __cil_tmp38 ;
  union __anonunion_data_addr_6 *__cil_tmp39 ;
  unsigned long long __cil_tmp40 ;
  unsigned long long __cil_tmp41 ;
  unsigned int __cil_tmp42 ;
  unsigned long __cil_tmp43 ;
  unsigned int __cil_tmp44 ;
  int __cil_tmp45 ;
  unsigned int __cil_tmp46 ;

  {
  {
#line 67
  ea = argp;
#line 70
  tmp = __mfc_tag_reserve();
#line 70
  tag = tmp & 31U;
#line 73
  tmp___0 = __builtin_si_rdch(29);
#line 73
  tmp___1 = __builtin_si_to_uint(tmp___0);
#line 73
  __cil_tmp15 = 0 * 4UL;
#line 73
  __cil_tmp16 = 0 + __cil_tmp15;
#line 73
  __cil_tmp17 = (unsigned long )(& data_addr) + __cil_tmp16;
#line 73
  *((unsigned int *)__cil_tmp17) = (unsigned int )tmp___1;
#line 74
  tmp___2 = __builtin_si_rdch(29);
#line 74
  tmp___3 = __builtin_si_to_uint(tmp___2);
#line 74
  __cil_tmp18 = 1 * 4UL;
#line 74
  __cil_tmp19 = 0 + __cil_tmp18;
#line 74
  __cil_tmp20 = (unsigned long )(& data_addr) + __cil_tmp19;
#line 74
  *((unsigned int *)__cil_tmp20) = (unsigned int )tmp___3;
#line 81
  tmp___4 = atomic_add_return(1, ea);
#line 81
  exit_val = tmp___4;
  }
  {
#line 83
  while (1) {
    while_continue: /* CIL Label */ ;
#line 83
    if (exit_val < 100) {

    } else {
#line 83
      goto while_break;
    }
    {
#line 86
    __cil_tmp21 = (void volatile   *)(& data);
#line 86
    __cil_tmp22 = atomic_ret * 128;
#line 86
    __cil_tmp23 = (unsigned long )__cil_tmp22;
#line 86
    __cil_tmp24 = __cil_tmp23 * 4UL;
#line 86
    __cil_tmp25 = (unsigned long long )__cil_tmp24;
#line 86
    __cil_tmp26 = & data_addr;
#line 86
    __cil_tmp27 = *((unsigned long long *)__cil_tmp26);
#line 86
    __cil_tmp28 = __cil_tmp27 + __cil_tmp25;
#line 86
    __cil_tmp29 = (unsigned int )__cil_tmp28;
#line 86
    __cil_tmp30 = 128UL * 4UL;
#line 86
    __cil_tmp31 = (unsigned int )__cil_tmp30;
#line 86
    mfc_get(__cil_tmp21, __cil_tmp29, __cil_tmp31, tag, 0U, 0U);
#line 87
    __cil_tmp32 = 1 << tag;
#line 87
    __cil_tmp33 = (unsigned int )__cil_tmp32;
#line 87
    mfc_write_tag_mask(__cil_tmp33);
#line 100
    __cil_tmp34 = (void volatile   *)(& data);
#line 100
    __cil_tmp35 = atomic_ret * 128;
#line 100
    __cil_tmp36 = (unsigned long )__cil_tmp35;
#line 100
    __cil_tmp37 = __cil_tmp36 * 4UL;
#line 100
    __cil_tmp38 = (unsigned long long )__cil_tmp37;
#line 100
    __cil_tmp39 = & data_addr;
#line 100
    __cil_tmp40 = *((unsigned long long *)__cil_tmp39);
#line 100
    __cil_tmp41 = __cil_tmp40 + __cil_tmp38;
#line 100
    __cil_tmp42 = (unsigned int )__cil_tmp41;
#line 100
    __cil_tmp43 = 128UL * 4UL;
#line 100
    __cil_tmp44 = (unsigned int )__cil_tmp43;
#line 100
    mfc_put(__cil_tmp34, __cil_tmp42, __cil_tmp44, tag, 0U, 0U);
#line 101
    __cil_tmp45 = 1 << tag;
#line 101
    __cil_tmp46 = (unsigned int )__cil_tmp45;
#line 101
    mfc_write_tag_mask(__cil_tmp46);
#line 102
    mfc_read_tag_status_all();
#line 103
    exit_val = atomic_add_return(1, ea);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 108
  return (0);
}
}
